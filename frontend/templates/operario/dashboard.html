<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Operario - Sistema de Inventario</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- CSS personalizados organizados -->
    <link rel="stylesheet" href="/static/css/global.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/css/datatable.css">
    <link rel="stylesheet" href="/static/css/modal.css">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- Sidebar Header -->
            <div class="sidebar-header">
                <h1>üõ¢Ô∏è SisInventario</h1>
                <p>Panel de Operario</p>
            </div>

            <!-- Sidebar Menu -->
            <nav class="sidebar-menu">
                <a href="#" class="menu-item active" onclick="navigateTo('inventario')">
                    <svg class="menu-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
                    </svg>
                    <span>Inventario</span>
                </a>

                <a href="#" class="menu-item" onclick="navigateTo('mis-reportes')">
                    <svg class="menu-icon" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M2.5 3.5a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-11zm2-2a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1h-7zM0 13a1.5 1.5 0 0 0 1.5 1.5h13A1.5 1.5 0 0 0 16 13V6a1.5 1.5 0 0 0-1.5-1.5h-13A1.5 1.5 0 0 0 0 6v7zm1.5.5A.5.5 0 0 1 1 13V6a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-13z"/>
                    </svg>
                    <span>Mis Reportes</span>
                </a>
            </nav>

            <!-- Sidebar Footer -->
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar">O</div>
                    <div class="user-details">
                        <div class="user-name" id="user-name">Operario</div>
                        <div class="user-role">Operario</div>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">
                    Cerrar Sesi√≥n
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-area">
                
                <!-- Secci√≥n de Inventario -->
                <div id="inventario-section" class="section-content">
                    <div class="page-header">
                        <h1 class="page-title">Inventario de Equipos</h1>
                        <p class="page-subtitle">Consulta de maquinaria y herramientas</p>
                    </div>

                    <div class="card">
                        <table id="inventoryTable" class="display" style="width:100%">
                            <thead>
                                <tr>
                                    <th>C√≥digo</th>
                                    <th>Nombre</th>
                                    <th>Tipo</th>
                                    <th>Categor√≠a</th>
                                    <th>Estado</th>
                                    <th>Stock</th>
                                    <th>Ubicaci√≥n</th>
                                    <th>Fecha Adquisici√≥n</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be loaded via DataTables -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Secci√≥n de Mis Reportes -->
                <div id="mis-reportes-section" class="section-content" style="display: none;">
                    <div class="page-header">
                        <h1 class="page-title">Mis Reportes</h1>
                        <p class="page-subtitle">Historial de reportes enviados</p>
                    </div>

                    <div class="card">
                        <table id="myReportsTable" class="display" style="width:100%">
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Equipo</th>
                                    <th>Tipo</th>
                                    <th>Mensaje</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be loaded via DataTables -->
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Modal para Crear Reporte -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Reportar Problema / Novedad</h2>
                <button class="modal-close" onclick="closeReportModal()">&times;</button>
            </div>
            
            <form id="reportForm" onsubmit="saveReport(event)">
                <input type="hidden" id="articleId" value="">
                
                <div class="form-grid">
                    <!-- Info del equipo (solo lectura) -->
                    <div class="form-group full-width">
                        <label>Equipo</label>
                        <input type="text" id="articleInfo" readonly style="background: #f5f5f5;">
                    </div>

                    <!-- Tipo de reporte -->
                    <div class="form-group full-width">
                        <label for="reportType">Tipo de Reporte <span class="required">*</span></label>
                        <select id="reportType" required>
                            <option value="">Seleccionar...</option>
                            <option value="FALLA">üî¥ Falla / Aver√≠a</option>
                            <option value="MANTENIMIENTO">üü° Requiere Mantenimiento</option>
                            <option value="OBSERVACION">üîµ Observaci√≥n General</option>
                            <option value="SOLICITUD">üü¢ Solicitud de Revisi√≥n</option>
                        </select>
                    </div>

                    <!-- Mensaje -->
                    <div class="form-group full-width">
                        <label for="reportMessage">Descripci√≥n del Problema <span class="required">*</span></label>
                        <textarea id="reportMessage" rows="5" required
                                  placeholder="Describe detalladamente el problema, observaci√≥n o solicitud..."></textarea>
                        <small class="hint-text">Sea espec√≠fico: ¬øqu√© pas√≥? ¬øcu√°ndo? ¬øc√≥mo lo not√≥?</small>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeReportModal()">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-primary">
                        üì§ Enviar Reporte
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- jQuery (required for DataTables) -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    
    <!-- JS personalizados -->
    <script src="/static/js/api.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/dashboard-operario.js"></script>
</body>
</html>
